// 5Á≠âÂàÜ„ÅÆËä±Â´Å ÂãïÁöÑËÉåÊôØ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
document.addEventListener('DOMContentLoaded', function() {
    createAnimatedBackground();
    createSakuraPetals();
    createFloatingHearts();
    createCharacterItems(); // Êñ∞„Åó„ÅèËøΩÂä†
    startGradientAnimation();
    setTimeout(createSparkles, 2000);
});

// ÂãïÁöÑËÉåÊôØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥„ÅÆ‰ΩúÊàê
function createAnimatedBackground() {
    const body = document.body;
    
    // 5Á≠âÂàÜ„ÅÆËä±Â´Å„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„Éº„Ç´„É©„Éº
    const colors = [
        '#ff9a9e', // ‰∏ÄËä± - „Éî„É≥„ÇØ
        '#fecfef', // ‰∫å‰πÉ - „É©„Ç§„Éà„Éî„É≥„ÇØ
        '#a8e6cf', // ‰∏âÁéñ - „Ç∞„É™„Éº„É≥
        '#88d8ff', // ÂõõËëâ - „Éñ„É´„Éº
        '#ffb199'  // ‰∫îÊúà - „Ç™„É¨„É≥„Ç∏
    ];
    
    // ËÉåÊôØ„ÅÆ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥„ÇíÂãïÁöÑ„Å´Â§âÊõ¥
    let colorIndex = 0;
    setInterval(() => {
        const currentColor = colors[colorIndex % colors.length];
        const nextColor = colors[(colorIndex + 1) % colors.length];
        
        body.style.background = `
            linear-gradient(135deg, 
                ${currentColor} 0%, 
                ${nextColor} 50%, 
                rgba(255, 255, 255, 0.9) 100%
            )
        `;
        
        colorIndex++;
    }, 5000); // 5Áßí„Åî„Å®„Å´Ëâ≤„ÇíÂ§âÊõ¥
}

// Ê°ú„ÅÆËä±„Å≥„Çâ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function createSakuraPetals() {
    const petalContainer = document.createElement('div');
    petalContainer.className = 'sakura-container';
    petalContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    document.body.appendChild(petalContainer);
    
    // Ê°ú„ÅÆËä±„Å≥„Çâ„ÇíÂÆöÊúüÁöÑ„Å´ÁîüÊàê
    setInterval(createPetal, 800);
    
    function createPetal() {
        const petal = document.createElement('div');
        petal.className = 'sakura-petal';
        
        // „É©„É≥„ÉÄ„É†„Å™ÈñãÂßã‰ΩçÁΩÆ„Å®„Çµ„Ç§„Ç∫
        const startX = Math.random() * window.innerWidth;
        const size = Math.random() * 15 + 10; // 10-25px
        const opacity = Math.random() * 0.7 + 0.3; // 0.3-1.0
        const duration = Math.random() * 8000 + 6000; // 6-14Áßí
        
        petal.style.cssText = `
            position: absolute;
            top: -20px;
            left: ${startX}px;
            width: ${size}px;
            height: ${size}px;
            background: linear-gradient(45deg, #ffb6c1, #ffc0cb, #ffe4e1);
            border-radius: 0 100% 0 100%;
            opacity: ${opacity};
            transform: rotate(45deg);
            animation: sakuraFall ${duration}ms linear forwards;
        `;
        
        petalContainer.appendChild(petal);
        
        // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁµÇ‰∫ÜÂæå„Å´Ë¶ÅÁ¥†„ÇíÂâäÈô§
        setTimeout(() => {
            if (petal.parentNode) {
                petal.parentNode.removeChild(petal);
            }
        }, duration);
    }
}

// „Éè„Éº„Éà„ÅÆ„Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function createFloatingHearts() {
    const heartContainer = document.createElement('div');
    heartContainer.className = 'heart-container';
    heartContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    document.body.appendChild(heartContainer);
    
    // „Éè„Éº„Éà„ÇíÂÆöÊúüÁöÑ„Å´ÁîüÊàê
    setInterval(createHeart, 3000);
    
    function createHeart() {
        const heart = document.createElement('div');
        heart.innerHTML = 'üíï';
        
        const startX = Math.random() * window.innerWidth;
        const size = Math.random() * 20 + 15; // 15-35px
        const opacity = Math.random() * 0.5 + 0.2; // 0.2-0.7
        const duration = Math.random() * 10000 + 8000; // 8-18Áßí
        
        heart.style.cssText = `
            position: absolute;
            top: 100vh;
            left: ${startX}px;
            font-size: ${size}px;
            opacity: ${opacity};
            animation: heartFloat ${duration}ms ease-out forwards;
        `;
        
        heartContainer.appendChild(heart);
        
        setTimeout(() => {
            if (heart.parentNode) {
                heart.parentNode.removeChild(heart);
            }
        }, duration);
    }
}

// 5Á≠âÂàÜ„ÅÆËä±Â´Å„Ç≠„É£„É©„ÇØ„Çø„Éº„Ç¢„Ç§„ÉÜ„É†„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function createCharacterItems() {
    const itemContainer = document.createElement('div');
    itemContainer.className = 'character-items-container';
    itemContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    document.body.appendChild(itemContainer);
    
    // ÂêÑ„Ç≠„É£„É©„ÇØ„Çø„Éº„ÅÆ„Ç¢„Ç§„ÉÜ„É†
    const characterItems = [
        'ü•§', // „Éï„É©„Éö„ÉÅ„Éº„Éé - ‰∏ÄËä±
        'üéÄ', // „É™„Éú„É≥ - ‰∫å‰πÉ
        'üçµ', // ÊäπËå∂ - ‰∏âÁéñ
        'üçÄ', // ÂõõËëâ„ÅÆ„ÇØ„É≠„Éº„Éê„Éº - ÂõõËëâ
        'ü•ü'  // ËÇâ„Åæ„Çì - ‰∫îÊúà
    ];
    
    // „Ç¢„Ç§„ÉÜ„É†„ÇíÂÆöÊúüÁöÑ„Å´ÁîüÊàê
    setInterval(() => {
        createFloatingItem(itemContainer, characterItems);
    }, 2000);
    
    function createFloatingItem(container, items) {
        const item = document.createElement('div');
        const randomItem = items[Math.random() * items.length | 0];
        item.innerHTML = randomItem;
        
        // „É©„É≥„ÉÄ„É†„Å™ÈñãÂßã‰ΩçÁΩÆ„Å®Âãï„Åç„ÅÆ„Éë„Çø„Éº„É≥
        const startSide = Math.random() < 0.5 ? 'left' : 'right';
        const startX = startSide === 'left' ? -50 : window.innerWidth + 50;
        const startY = Math.random() * window.innerHeight * 0.8; // ‰∏äÈÉ®80%„Åã„ÇâÈñãÂßã
        const size = Math.random() * 25 + 20; // 20-45px
        const opacity = Math.random() * 0.6 + 0.3; // 0.3-0.9
        const duration = Math.random() * 12000 + 8000; // 8-20Áßí
        const direction = startSide === 'left' ? 1 : -1;
        
        item.style.cssText = `
            position: absolute;
            top: ${startY}px;
            left: ${startX}px;
            font-size: ${size}px;
            opacity: ${opacity};
            animation: characterItemFloat-${startSide} ${duration}ms linear forwards;
            z-index: -1;
        `;
        
        container.appendChild(item);
        
        // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÁµÇ‰∫ÜÂæå„Å´Ë¶ÅÁ¥†„ÇíÂâäÈô§
        setTimeout(() => {
            if (item.parentNode) {
                item.parentNode.removeChild(item);
            }
        }, duration);
    }
}

// Á∏¶„Å´ÊµÅ„Çå„Çã„Ç¢„Ç§„ÉÜ„É†„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function createVerticalCharacterItems() {
    const verticalContainer = document.createElement('div');
    verticalContainer.className = 'vertical-items-container';
    verticalContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    document.body.appendChild(verticalContainer);
    
    const characterItems = ['ü•§', 'üéÄ', 'üçµ', 'üçÄ', 'ü•ü'];
    
    // Á∏¶ÊñπÂêë„ÅÆ„Ç¢„Ç§„ÉÜ„É†„ÇíÂÆöÊúüÁöÑ„Å´ÁîüÊàê
    setInterval(() => {
        createVerticalItem(verticalContainer, characterItems);
    }, 3000);
    
    function createVerticalItem(container, items) {
        const item = document.createElement('div');
        const randomItem = items[Math.random() * items.length | 0];
        item.innerHTML = randomItem;
        
        const startX = Math.random() * window.innerWidth;
        const size = Math.random() * 20 + 15; // 15-35px
        const opacity = Math.random() * 0.5 + 0.2; // 0.2-0.7
        const duration = Math.random() * 15000 + 10000; // 10-25Áßí
        const rotation = Math.random() * 360;
        
        item.style.cssText = `
            position: absolute;
            top: -50px;
            left: ${startX}px;
            font-size: ${size}px;
            opacity: ${opacity};
            transform: rotate(${rotation}deg);
            animation: verticalItemFall ${duration}ms linear forwards;
        `;
        
        container.appendChild(item);
        
        setTimeout(() => {
            if (item.parentNode) {
                item.parentNode.removeChild(item);
            }
        }, duration);
    }
}

// ÂõûËª¢„Åó„Å™„Åå„ÇâÊµÅ„Çå„Çã„Ç¢„Ç§„ÉÜ„É†
function createRotatingItems() {
    const rotatingContainer = document.createElement('div');
    rotatingContainer.className = 'rotating-items-container';
    rotatingContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    document.body.appendChild(rotatingContainer);
    
    const characterItems = ['ü•§', 'üéÄ', 'üçµ', 'üçÄ', 'ü•ü'];
    
    setInterval(() => {
        createRotatingItem(rotatingContainer, characterItems);
    }, 4000);
    
    function createRotatingItem(container, items) {
        const item = document.createElement('div');
        const randomItem = items[Math.random() * items.length | 0];
        item.innerHTML = randomItem;
        
        const startX = Math.random() * window.innerWidth;
        const startY = Math.random() * window.innerHeight;
        const size = Math.random() * 30 + 25; // 25-55px
        const opacity = Math.random() * 0.4 + 0.2; // 0.2-0.6
        const duration = Math.random() * 20000 + 15000; // 15-35Áßí
        
        item.style.cssText = `
            position: absolute;
            top: ${startY}px;
            left: ${startX}px;
            font-size: ${size}px;
            opacity: ${opacity};
            animation: rotatingItemMove ${duration}ms ease-in-out forwards;
        `;
        
        container.appendChild(item);
        
        setTimeout(() => {
            if (item.parentNode) {
                item.parentNode.removeChild(item);
            }
        }, duration);
    }
}

// „Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥Ê≥¢ÂΩ¢„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
function startGradientAnimation() {
    const waveContainer = document.createElement('div');
    waveContainer.className = 'wave-container';
    waveContainer.style.cssText = `
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 200px;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
    `;
    
    // 3„Å§„ÅÆÊ≥¢„Çí‰ΩúÊàê
    for (let i = 0; i < 3; i++) {
        const wave = document.createElement('div');
        wave.className = `wave wave-${i + 1}`;
        
        const colors = [
            'rgba(255, 154, 158, 0.3)', // ‰∏ÄËä±„Ç´„É©„Éº
            'rgba(254, 207, 239, 0.3)', // ‰∫å‰πÉ„Ç´„É©„Éº
            'rgba(168, 230, 207, 0.3)'  // ‰∏âÁéñ„Ç´„É©„Éº
        ];
        
        wave.style.cssText = `
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100px;
            background: ${colors[i]};
            border-radius: 50%;
            animation: waveMove ${8 + i * 2}s ease-in-out infinite;
            animation-delay: ${i * 0.5}s;
            transform: translateX(-50%);
        `;
        
        waveContainer.appendChild(wave);
    }
    
    document.body.appendChild(waveContainer);
}

// „Ç≠„É©„Ç≠„É©„Ç®„Éï„Çß„ÇØ„Éà
function createSparkles() {
    const sparkleContainer = document.createElement('div');
    sparkleContainer.className = 'sparkle-container';
    sparkleContainer.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
    `;
    document.body.appendChild(sparkleContainer);
    
    setInterval(createSparkle, 1500);
    
    function createSparkle() {
        const sparkle = document.createElement('div');
        sparkle.innerHTML = '‚ú®';
        
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight;
        const size = Math.random() * 15 + 10;
        
        sparkle.style.cssText = `
            position: absolute;
            top: ${y}px;
            left: ${x}px;
            font-size: ${size}px;
            animation: sparkleGlow 2s ease-out forwards;
        `;
        
        sparkleContainer.appendChild(sparkle);
        
        setTimeout(() => {
            if (sparkle.parentNode) {
                sparkle.parentNode.removeChild(sparkle);
            }
        }, 2000);
    }
}

// „Éú„Çø„É≥„Éõ„Éê„ÉºÊôÇ„ÅÆ„Ç®„Éï„Çß„ÇØ„Éà
document.addEventListener('mouseover', function(e) {
    if (e.target.classList.contains('plan-btn') || 
        e.target.classList.contains('event-btn') || 
        e.target.classList.contains('home-btn')) {
        createButtonSparkle(e.target);
    }
});

function createButtonSparkle(button) {
    const rect = button.getBoundingClientRect();
    const sparkle = document.createElement('div');
    sparkle.innerHTML = '‚≠ê';
    
    sparkle.style.cssText = `
        position: absolute;
        top: ${rect.top + Math.random() * rect.height}px;
        left: ${rect.left + Math.random() * rect.width}px;
        font-size: 12px;
        pointer-events: none;
        z-index: 1000;
        animation: buttonSparkle 1s ease-out forwards;
    `;
    
    document.body.appendChild(sparkle);
    
    setTimeout(() => {
        if (sparkle.parentNode) {
            sparkle.parentNode.removeChild(sparkle);
        }
    }, 1000);
}

// „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñãÂßã
setTimeout(createSparkles, 2000);
setTimeout(createVerticalCharacterItems, 4000);
setTimeout(createRotatingItems, 6000);
